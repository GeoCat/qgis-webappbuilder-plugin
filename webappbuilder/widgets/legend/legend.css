.legend {
    position: absolute;
    top: 7.5em;
    right: 0.5em;
    text-align: left;
}

.legend-panel {
    padding-right: 50px;
    border: 1px solid #cccccc;
    background-color: white;
    height: auto;
    max-height:500px;
    overflow: auto;

}

.legend .legend-panel {
    display: none;
}

.legend.shown .legend-panel {
    display: block;
}

.legend button {
    float: right;
    width: 38px;
    height: 38px;
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABSRJREFUeNq8V11oHFUU/u69sz+hTbJ5aKVIxL6klqJgsUrEmpRUGg2WKtJImvpLEUUwte2DIMWI0IeW2ioWKooVmmr0pfj3oqmJ+KIGpUKhBrTqQkClBtLUZLMz93rOnZ+d2Z3V0tVMmWbu7/nOd8537l0BwNmx98jpsmf6PG2wFI+SAhklPh45NLTNoXYTGx89PIT5y5eWBEDTsmb0P3ukjz8ZQN7ztB34pThN/0sIIVKWGRhDb0Om/dVrb1iDwGaeAYhwU6UcoiYLRzqQFoSwizQZ9rSLsi7TX68x943xnfFbwomjyzl5HPviKCamPicACoyB52vjoatjE57qegYld5H69NUDECZigp8YAEqMjIPxH85gdM9bOFf8mnok+4917bfiwcOPYqhnH7VcAuQzkxaPsCuKookC6DuPhH0kGFBSkecSv88W8en5dy0L7P2K1lUERVmAUDmaqy0LRtfmRJgnUkobQARtDqPr+Wt4fQoA2ptpJ1MzpWkUWgrWqIZn24KAZVUGdw7uBn2iu+deaK2TAGyuGLz0eBc2DuzF5i33+UCtcYP9D91OQHQdBmiSkH7izZk/0NrSbBXBaLnNi9jc+MjBCgMmRmuMAZcSdeLUQZ+BgPqQAfIyMT/BAHvJG5edP9HW1hypgNuMXJN35bJrN6uxXJUH2tO1uWGY33oAmD7617NuC1458RnFvzKkjWv7XRrXoYjElSi+SgCUmdUlJsGAR8uG+vZj37YXKYkq/RRquOR5qTQbbXTVKhT1VMAjmTyK7/Vi9tsx38NwMr2t63twzQMfQBIbaKAOWPAyrQ5wfEhiM5Nj2HTgO6A4xrqwvKC9B+PP3YxV/TkItUBzvagO1NN9oiaEflCYbYXVaQxIBqD870tTwPmjfqFkjwvtjA+ZnIKj8pRInk1WTkbWNUtbKRllfVhx2WA4xvPKrhfkj6ijgjDu5Z9AMqAO5XtLbV7CdWh935NwhEbX5q2U6Z6V1qt7tuKmvl1W97bwBMXHC8ZuvGcXumn+oad7qU7olCQ0YSEKkRQJwHLqJ0RkjNvWI/o8++FxAhMwoH1jLnl29qPXKwyYCuU89j2N8TczYENgD5nUOhCAaaJjeWWLzQt7eGSmbb8XqCHKAVTKgWe89IMvGDMBKBmXV/VZILXAis67MTF8OqlzWrmS+iXR59lSamJHWH3hx8dEoACfgRoA/mqFEtY+8gnUY7WbsfcLC/M2KsY0UAdkXN9VxzHfj544OYFTkz/be1s4jQ+YgVuux7H+2zDvSegG7kXSZnqVCqLtMhInv/oRk8MP45tfZ1mZVkYbrmvBhhfexvHBTjiaRGhqBW+AZJkNDqBaBpIRc6ruq1YJ07MlvH/uov1mY9cWcr5CZBb5pkwlw+yJ6Bviv4rvAKJyLHPWV8sulYF4GHiD3/5ySYXZ4D4kbFsGazq6B8gLSfcBqgPai876E8ODWH3HdtzVe7+9J7DxN57vT96EUs6RWgC04OKiRFtzPiBK2Hb4TI2/E0t7E7FhCMyFL0dj/DMIXXMCSvmPAPyYz1EFLLQsiwDMEW3hjxbNtFZf7qIcMImk0Ma/Y1TfOVIqYYWjnZ0dOPDmCMW8gpQN7uxcE10ua0QfSdsk+mTKsa1CBkxchrGJr+3YaN961wyuZLKBnwUiBBDYtAAcdaVbisoGDT6hTQsg66i57btfXm4vjeZ//oFKnrNxthmW6wK9q+ltw7/e9P6zh72cofeCPebp5ZTPYmmfRXov/y3AALnphTWuCyuxAAAAAElFTkSuQmCC');
    background-repeat: no-repeat;
    background-position: 2px;
    background-color: white;
    border: none;
}

.legend button:focus, .legend button:hover {
    background-color: white;
}

.expandableList ul {
  padding: 0 0 0 30px;
  width: 300px;
}

.expandableList li
  {
    position: relative;
    list-style: none;
    margin-left: -15px;
    margin-top:15px;
    padding: 0;
  }
.expandableList  li input
  {
    position: absolute;
    left: 0;
    margin-left: 0;
    opacity: 0;
    z-index: 2;
    cursor: pointer;
    height: 1em;
    width: 1em;
    top: 0;
  }
.expandableList li input + ul
    {
      background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAURJREFUeNpi/P//PwMlgImBQkCxASwwRlLLKwYmJqZgRkbGbiBXEYva+0Dvlv7792/tvBoxTAO+fv0MororE6UU9VU5MHRfvP1DsX3+M5DhaxkYxDC98ObNGxBW1FVmY/j16xcYu6SdYvjw4QPDixcvGGSEvoLlQeqweuHdu7dg+vfv32D85ctXsNijR4/B4hwcnHA1WA348uUbmP779y+DUchOuIKQsltgetsUE7garAb8/w9h/vz5h+H0Sk8w2yRsN8OZVa5g9ocPn+BqsBrAzs4PdQEzw48ff+Fi375B2Gxs3HA1WNPB45NlDNzcIvfPXv8LVMwJxmdWOcDZF2//A8uD1GF1wefXZ8Q+Pt42oWN+VBED41d5DKv+/30IlJ8IVCcF5D2DCTPC8gIwAXEDKT4Qk0Di+wzU8xnDgKGbmQACDAAtTZadqmiADQAAAABJRU5ErkJggg==') 40px 0px no-repeat;
      margin: -22px 0 0 -44px; /* 15px */
      height: 1em;
    }
.expandableList li input + ul > li { display: none; margin-left:-14px !important; padding-left: 1px; }
.expandableList li label
  {
    cursor: pointer;
    display: block;
    padding-left: 20px;
  }

.expandableList li input {
    display: none;
}

.expandableList li input:checked + ul
  {
    background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAASxJREFUeNpi/P//PwMlgImBQkCxASwwRlLLKwYmJqZgRkbGbiBXEYva+0Dvlv7792/tvBoxTAO+fv0MororE6UU9VU5MHRfvP1DsX3+M5DhaxkYsBjw5s0bEKWoq6zA8OvXL7AYKIC/f//O8OPHDwYZIVaQGqjLlDENePfuLZj+/fs3GH/58pXh/fv3YDYIcHBwwtVgDYMvX76B6b9//zIYhezEULhtiglcDVYD/v+HMH/+/MNweqUnhsIPHz7B1WA1gJ2dH+oCZqCf/2IoZGPjhqvBmg4enyxj4OYWuX/2+l+gYk4MfPH2P7A8SB1WF3x+fUbs4+NtEzrmRxUxMH6Vx7Dq/9+HQPmJQHVSQN4zmDAjLC8AExA3kOIDMQkkvs9APZ8xDBi6mQkgwADDMYZH9Ls66AAAAABJRU5ErkJggg==') 40px 0px no-repeat;
    margin: -22px 0 0 -44px; /* 20px */
    padding: 1.563em 0 0 80px;
    height: auto;
  }
.expandableList li input:checked + ul > li { display: block; margin: 0 0 0.125em;  /* 2px */}
.expandableList li input:checked + ul > li:last-child { margin: 0 0 0.063em; /* 1px */ }
